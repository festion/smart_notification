#!/usr/bin/with-contenv bash
# ==============================================================================
# Start the smart notification service
# s6-overlay service for Home Assistant Add-on
# ==============================================================================

# Set up logging
echo "[INFO] Starting Smart Notification Router service..."

# Verify script location
if [ ! -f "/app/run.sh" ]; then
    echo "[ERROR] Run script not found at /app/run.sh"
    find /app -type f -name "*.sh" | sort
    find / -name "run.sh" -type f | sort
    exit 1
fi

# Show permissions
echo "[DEBUG] Script permissions:"
ls -la /app/run.sh

# Execute with full error handling
echo "[INFO] Executing run.sh"
exec /app/run.sh
